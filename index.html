
<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Kradac: Rastreo</title>
        <script src='js/jproxy.js'></script>
        <script>
            /***** initialization *****/
            function init() {
                var appid = 'dobI4H4zeDcAUAjDgtUL_1';//<<< set to the right Application ID
                jpro.init(appid, on_jproReady, on_jproAuth);

                try {
                    jpro.creds.set("hugo.ramirez@kradac.com", "kradacloja");
                } catch (e) {
                    console.error(e);
                }
            }
            function logout() {
                jpro.creds.logout();
            }
            function on_jproAuth(state, data) {
                if (state === 'ok') {
                    reload();
                }
            }
            function on_jproReady() {
                console.log("Login se ha realizado correctamente");
            }

            function getLastStoredLocation(id) {
                try {
                    jpro.api.Location.getLast({vid: id, request_type: 0}, on_getStoredLocation_done);
                }
                catch (e) {
                    console.error(e);
                }

            }
            function on_getStoredLocation_done(success, data) {

                if (success === false) {
                    console.error("get last location, something went wrong ", data);
                    return;
                }
                console.log(data.location);
            }
            function reload() {
                setTimeout(function () {
                    getLastStoredLocation(791);
                    reload();
                }
                , 10 * 1000);
            }
        </script>
    </head>
    <body onload='init()'>
    </body>
</html>



